<style>
.year-card-col {
  margin-bottom: 2.2rem !important;
}
</style>

<section class="container my-5 px-5 py-5 bg-purple text-white" id="history">
    <h2 class="text-center fw-bold my-5 text-white glow-animate" style="font-size:4rem">40 Years of NECYSC</h2>

  <!-- FOUNDERS/LEGACY SECTION -->
  {% comment %} <h2 class="text-center fw-bold my-5 text-white" style="font-size:2.5rem">Our Founders & Legacy</h2>
  <div class="row justify-content-center g-4">
    <div class="col-6 col-md-3 text-center">
      <img src="/static/necysc_app/images/headshots/founder1.jpg" alt="Founder 1" class="rounded-circle shadow mb-3" style="width:120px;height:120px;object-fit:cover;" />
      <div class="fw-bold" style="color:#393866;">Founder Name</div>
      <div class="fst-italic small">“A vision for the future.”</div>
    </div>
    <div class="col-6 col-md-3 text-center">
      <img src="/static/necysc_app/images/headshots/founder2.jpg" alt="Founder 2" class="rounded-circle shadow mb-3" style="width:120px;height:120px;object-fit:cover;" />
      <div class="fw-bold" style="color:#393866;">Founder Name</div>
      <div class="fst-italic small ">“Building a legacy together.”</div>
    </div>
    <div class="col-6 col-md-3 text-center">
      <img src="/static/necysc_app/images/headshots/founder3.jpg" alt="Founder 3" class="rounded-circle shadow mb-3" style="width:120px;height:120px;object-fit:cover;" />
      <div class="fw-bold" style="color:#393866;">Founder Name</div>
      <div class="fst-italic small ">“Community is everything.”</div>
    </div>
  </div> {% endcomment %}
  <!-- IMPACT STATS SECTION -->
  <h2 class="text-center fw-bold my-5 text-white" style="font-size:2.5rem">Our Impact</h2>
  <div class="row text-center g-4">
    <div class="col-6 col-md-3">
      <div class="display-4 fw-bold scramble-number" data-target="40" style="color:#f9c784;">40+</div>
      <h3 class="fw-bold" style="color:#f9c784;">Years</h3>
      <div class=" small">of community</div>
    </div>
    <div class="col-6 col-md-3">
      <div class="display-4 fw-bold scramble-number" data-target="2000" style="color:#f9c784;">2,000+</div>
      <h3 class="fw-bold" style="color:#f9c784;">Campers</h3>
      <div class=" small">since 1985</div>
    </div>
    <div class="col-6 col-md-3">
      <div class="display-4 fw-bold scramble-number" data-target="350" style="color:#f9c784;">350+</div>
      <h3 class="fw-bold" style="color:#f9c784;">Staff</h3>
      <div class=" small">worldwide</div>
    </div>
    <div class="col-6 col-md-3">
      <div class="display-4 fw-bold scramble-number" data-target="10" style="color:#f9c784;">10+</div>
      <h3 class="fw-bold" style="color:#f9c784;">Programs</h3>
      <div class="small">for all ages</div>
    </div>
  </div>
  
  <!-- TIMELINE SECTION -->
  <div class="container py-5 my-5 d-flex align-items-center justify-content-center flex-column" style="min-height: 20vh;">
    <h3 class="fw-bold mb-2 text-center text-white display-6">1986: NECYSC is Born</h3>
    <p class="lead mb-0 text-center">A group of passionate families and leaders come together to create a summer experience for Asian American youth.</p>
  </div>
  
  <div class="timeline-parallax-section position-relative" style="min-height: 100vh;">
    <div class="parallax-timeline-bg" style="background-image: url('/static/necysc_app/images/history/history_one.jpg');"></div>
  </div>
  
  <div class="container py-5 my-5 d-flex align-items-center justify-content-center flex-column" style="min-height: 60vh;">
    <h3 class="fw-bold mb-2 text-center text-white display-6">2000s: Growth & Innovation</h3>
    <p class="lead mb-0 text-center">New programs, new faces, and a growing legacy. NECYSC expands its reach and impact across New England.</p>
  </div>
  

  <div class="timeline-parallax-section position-relative mb-0" style="min-height: 100vh;">
    <div class="parallax-timeline-bg" style="background-image: url('/static/necysc_app/images/history/history_two.jpg');"></div>
  </div>
  <div class="container py-5 my-5 d-flex align-items-center justify-content-center flex-column" style="min-height: 60vh;">
    <h3 class="fw-bold mb-2 text-center text-white display-6">2020s: 40 Years Strong</h3>
    <p class="lead mb-0 text-center">Celebrating four decades of community, resilience, and joy. The journey continues with new generations.</p>
  </div>

  <div class="timeline-parallax-section position-relative mb-5" style="min-height: 100vh;">
    <div class="parallax-timeline-bg" style="background-image: url('/static/necysc_app/images/history/history_three.jpg');"></div>
  </div>

  <!-- GALLERY SECTION (already present, left as is) -->

  <div class="align-items-center justify-content-center flex-column d-flex" style="min-height: 15vh;">
  <h2 class="text-center fw-bold my-5 text-white" style="font-size:4rem">Gallery</h2>
  </div>
  <div class="museum-gallery row align-items-stretch mt-5" style="margin:0;padding:0;">
    {% for item in gallery %}
    <div class="col-lg-4 col-md-6 col-6 d-flex align-items-stretch" style="padding:0;margin:0;">
      <div class="gallery-card">
        <img src="{{ item.image }}" alt="Gallery image" loading="lazy" />
        <div class="gallery-card-overlay">{{ item.description }}</div>
      </div>
    </div>
    {% endfor %}
  </div>
  
</section>

<script>
function scrambleNumber(el, target, duration = 2000) {
  let start = 0;
  let startTime = null;
  target = parseInt(target, 10);
  function animateScramble(ts) {
    if (!startTime) startTime = ts;
    let progress = Math.min((ts - startTime) / duration, 1);
    let current = Math.floor(progress * target);
    el.textContent = current.toLocaleString() + "+";
    if (progress < 1) {
      requestAnimationFrame(animateScramble);
    } else {
      el.textContent = target.toLocaleString() + "+";
    }
  }
  requestAnimationFrame(animateScramble);
}

document.addEventListener("DOMContentLoaded", function() {
  let hasScrambled = false;
  const impactSection = document.querySelector('.row.text-center.g-4');
  if (!impactSection) return;

  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting && !hasScrambled) {
        document.querySelectorAll('.scramble-number').forEach(el => {
          scrambleNumber(el, el.getAttribute('data-target'));
        });
        hasScrambled = true;
        obs.disconnect();
      }
    });
  }, { threshold: 0.3 });

  observer.observe(impactSection);
});
</script>

